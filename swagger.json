{
    "openapi": "3.0.3",
    "info": {
        "title": "Warehouse Management API",
        "version": "1.0.0",
        "description": "API para gestionar empresas, almacenes, productos, inventarios y movimientos de stock."
    },
    "servers": [
        {
            "url": "http://localhost:3000/api"
        }
    ],
    "paths": {
        "/companies": {
            "get": {
                "summary": "Obtener todas las empresas",
                "tags": [
                    "Companies"
                ],
                "responses": {
                    "200": {
                        "description": "Lista de empresas obtenida correctamente"
                    }
                }
            }
        },
        "/companies/{id}": {
            "get": {
                "summary": "Obtener empresa por ID",
                "tags": [
                    "Companies"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Empresa encontrada"
                    },
                    "404": {
                        "description": "Empresa no encontrada"
                    }
                }
            },
            "post": {
        "summary": "Crear una nueva empresa",
        "tags": ["Companies"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Company"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Empresa creada exitosamente"
          }
        }
      },
            "put": {
                "summary": "Actualizar empresa",
                "tags": [
                    "Companies"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Company"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Empresa actualizada"
                    },
                    "404": {
                        "description": "Empresa no encontrada"
                    }
                }
            },
            "delete": {
                "summary": "Eliminar empresa",
                "tags": [
                    "Companies"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Empresa eliminada"
                    },
                    "404": {
                        "description": "Empresa no encontrada"
                    }
                }
            }
        },
        "/companies/{id}/warehouses": {
            "get": {
                "summary": "Obtener los almacenes de una empresa",
                "tags": [
                    "Companies"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de almacenes de la empresa"
                    }
                }
            }
        },
        "/warehouses": {
            "get": {
                "summary": "Obtener todos los almacenes",
                "tags": [
                    "Warehouses"
                ],
                "responses": {
                    "200": {
                        "description": "Lista de almacenes"
                    }
                }
            },
            "post": {
                "summary": "Crear un nuevo almacén",
                "tags": [
                    "Warehouses"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Warehouse"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Almacén creado"
                    }
                }
            }
        },
        "/warehouses/{id}": {
            "get": {
                "summary": "Obtener un almacén por ID",
                "tags": [
                    "Warehouses"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Almacén encontrado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            },
            "put": {
                "summary": "Actualizar un almacén",
                "tags": [
                    "Warehouses"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Warehouse"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Almacén actualizado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            },
            "delete": {
                "summary": "Eliminar un almacén",
                "tags": [
                    "Warehouses"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Almacén eliminado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            }
        },
        "/products": {
            "get": {
                "summary": "Obtener todos los productos",
                "tags": [
                    "Products"
                ],
                "responses": {
                    "200": {
                        "description": "Lista de productos"
                    }
                }
            },
            "post": {
                "summary": "Crear un nuevo producto",
                "tags": [
                    "Products"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Product"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Producto creado"
                    }
                }
            }
        },
        "/products/{id}": {
            "get": {
                "summary": "Obtener producto por ID",
                "tags": [
                    "Products"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Producto encontrado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            },
            "put": {
                "summary": "Actualizar producto",
                "tags": [
                    "Products"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Product"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Producto actualizado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            },
            "delete": {
                "summary": "Eliminar producto",
                "tags": [
                    "Products"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Producto eliminado"
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            }
        },
        "/movements": {
            "get": {
                "summary": "Obtener movimientos (opcionalmente filtrado por warehouseId y productId)",
                "tags": [
                    "Movements"
                ],
                "parameters": [
                    {
                        "name": "warehouseId",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "productId",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Movimientos obtenidos correctamente"
                    }
                }
            }
        },
        "/movements/in": {
            "post": {
                "summary": "Registrar entrada de producto al almacén",
                "tags": [
                    "Movements"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MovementInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Movimiento de entrada registrado"
                    }
                }
            }
        },
        "/movements/out": {
            "post": {
                "summary": "Registrar salida de producto del almacén",
                "tags": [
                    "Movements"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MovementInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Movimiento de salida registrado"
                    }
                }
            }
        },
        "/stock": {
            "get": {
                "summary": "Obtener el stock de productos por almacén",
                "tags": [
                    "Stock"
                ],
                "parameters": [
                    {
                        "name": "warehouseId",
                        "in": "query",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Stock obtenido correctamente"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Company": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "address": {
                        "type": "string"
                    }
                },
                "required": [
                    "name"
                ]
            },
            "Warehouse": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "location": {
                        "type": "string"
                    },
                    "companyId": {
                        "type": "integer"
                    }
                },
                "required": [
                    "name",
                    "companyId"
                ]
            },
            "Product": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "price": {
                        "type": "number"
                    },
                    "description": {
                        "type": "string"
                    }
                },
                "required": [
                    "name"
                ]
            },
            "MovementInput": {
                "type": "object",
                "properties": {
                    "warehouseId": {
                        "type": "integer"
                    },
                    "productId": {
                        "type": "integer"
                    },
                    "quantity": {
                        "type": "number"
                    },
                    "note": {
                        "type": "string"
                    }
                },
                "required": [
                    "warehouseId",
                    "productId",
                    "quantity"
                ]
            }
        }
    }
}